# ============================================================
# OMNI2 Environment Variables
# ============================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to git (it's in .gitignore)
# ============================================================

# ============================================================
# Application Settings
# ============================================================
APP_ENV=development
APP_DEBUG=true
APP_HOST=0.0.0.0
APP_PORT=8000
APP_RELOAD=true

# Secret key for JWT tokens, sessions, etc.
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-change-this

# ============================================================
# Database Configuration
# ============================================================
# PostgreSQL connection (existing PS_db database)
DATABASE_HOST=host.docker.internal
DATABASE_PORT=5432
DATABASE_NAME=omni
DATABASE_USER=postgres
DATABASE_PASSWORD=your-postgres-password
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# Database URL (alternative to individual params)
# Format: postgresql+asyncpg://user:password@host:port/database
# DATABASE_URL=postgresql+asyncpg://postgres:password@host.docker.internal:5432/omni

# ============================================================
# Anthropic Claude API
# ============================================================
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Model selection
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TIMEOUT=30

# ============================================================
# Slack Bot Configuration
# ============================================================
# Get these from: https://api.slack.com/apps
# Create a new app and install it to your workspace

# Bot User OAuth Token (starts with xoxb-)
SLACK_BOT_TOKEN=xoxb-your-bot-token-here

# App-Level Token (starts with xapp-) - required for Socket Mode
SLACK_APP_TOKEN=xapp-your-app-token-here

# Signing Secret (for webhook verification)
SLACK_SIGNING_SECRET=your-signing-secret-here

# Workspace ID (optional)
SLACK_WORKSPACE_ID=T1234567890

# ============================================================
# MCP Server Connections
# ============================================================
# Oracle MCP Server
MCP_ORACLE_ENABLED=true
MCP_ORACLE_URL=http://localhost:8001
MCP_ORACLE_TIMEOUT=30
MCP_ORACLE_API_KEY=U1f1mzzSvNKhrtntjJeE0O1KUz-7r7TiuR1-ushQXoc

# Smoketest MCP Server (future)
MCP_SMOKETEST_ENABLED=false
MCP_SMOKETEST_URL=http://localhost:8002
MCP_SMOKETEST_TIMEOUT=10

# ETL MCP Server (future)
MCP_ETL_ENABLED=false
MCP_ETL_URL=http://localhost:8003
MCP_ETL_TIMEOUT=60

# ============================================================
# Logging Configuration
# ============================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/omni2.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# Structured logging
STRUCTLOG_ENABLED=true
STRUCTLOG_PRETTY=true

# ============================================================
# Security Settings
# ============================================================
# CORS (Cross-Origin Resource Sharing)
CORS_ENABLED=true
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100

# ============================================================
# Redis Configuration (Phase 2)
# ============================================================
# Redis for caching, sessions, rate limiting
REDIS_ENABLED=true
REDIS_HOST=omni2-redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SSL=false

# ============================================================
# Monitoring & Metrics (Phase 2)
# ============================================================
# Prometheus metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Sentry error tracking
SENTRY_ENABLED=false
SENTRY_DSN=

# ============================================================
# Feature Flags
# ============================================================
FEATURE_SLACK_BOT=true
FEATURE_API_KEYS=false
FEATURE_WEBHOOKS=false
FEATURE_SCHEDULED_QUERIES=false

# ============================================================
# Development Settings
# ============================================================
# Auto-reload on code changes
DEV_RELOAD=true

# Show detailed error pages
DEV_DEBUG_PAGES=true

# SQL query logging
DEV_SQL_ECHO=false

# ============================================================
# Testing Settings
# ============================================================
# Use separate test database
TEST_DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/omni_test

# Mock external services in tests
TEST_MOCK_ANTHROPIC=true
TEST_MOCK_SLACK=true
TEST_MOCK_MCPS=true

# ============================================================
# Docker Settings
# ============================================================
# Used in docker-compose.yml
DOCKER_OMNI2_PORT=8000
DOCKER_POSTGRES_PORT=5432
DOCKER_REDIS_PORT=6379

# ============================================================
# Admin Settings
# ============================================================
# Super admin email (configured in users.yaml)
SUPER_ADMIN_EMAIL=avicoiot@gmail.com

# ============================================================
# Audit & Compliance
# ============================================================
# Audit log retention
AUDIT_RETENTION_DAYS=90

# Enable detailed audit logging
AUDIT_DETAILED_LOGGING=true

# Watch specific users
AUDIT_WATCH_USERS=[]

# ============================================================
# Performance Tuning
# ============================================================
# Worker processes (for production)
WORKERS=4

# Connection pool sizes
POOL_SIZE=20
MAX_OVERFLOW=10

# Request timeout
REQUEST_TIMEOUT=30

# ============================================================
# MCP Discovery Settings
# ============================================================
# Auto-discover MCPs
MCP_DISCOVERY_ENABLED=true
MCP_DISCOVERY_INTERVAL=300  # seconds (5 minutes)

# Cache tool registry
MCP_TOOL_CACHE_TTL=600  # seconds (10 minutes)

# ============================================================
# LLM Routing Settings
# ============================================================
# LLM routing confidence threshold
LLM_ROUTING_CONFIDENCE_THRESHOLD=0.7

# Fallback behavior
LLM_ROUTING_FALLBACK=ask_user

# Include conversation history
LLM_ROUTING_CONTEXT_MESSAGES=5

# ============================================================
# Slack Bot Behavior
# ============================================================
# Response timeout
SLACK_RESPONSE_TIMEOUT=30

# Show typing indicator
SLACK_SHOW_TYPING=true

# Use threads for long responses
SLACK_USE_THREADS=true

# ============================================================
# Timezone Settings
# ============================================================
TZ=UTC
APP_TIMEZONE=UTC

# ============================================================
# Notifications
# ============================================================
# Enable email notifications (Phase 2)
EMAIL_ENABLED=false
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=
EMAIL_PASSWORD=
EMAIL_FROM=noreply@omni2.local

# ============================================================
# Backup & Restore (Phase 2)
# ============================================================
BACKUP_ENABLED=false
BACKUP_INTERVAL=daily
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups

# ============================================================
# License & Telemetry
# ============================================================
# Anonymous usage telemetry (Phase 2)
TELEMETRY_ENABLED=false

# License key (if commercial version)
LICENSE_KEY=

# ============================================================
# Notes
# ============================================================
# 1. Generate SECRET_KEY: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 2. Get Anthropic API key: https://console.anthropic.com/
# 3. Get Slack tokens: https://api.slack.com/apps
# 4. Database runs at host.docker.internal:5432 (from Docker)
# 5. DO NOT commit .env file to git!
